---- MODULE RoHDonutLoopMinimal ----
EXTENDS Naturals, Reals

(***************************************************************************)
(* State variables                                                         *)
(***************************************************************************)

VARIABLES 
    t,     \* discrete time index: 0,1,2,...
    RoH    \* risk-of-harm scalar in [0,1]

(***************************************************************************)
(* Parameters                                                              *)
(***************************************************************************)

RoHMax == 0.3

(***************************************************************************)
(* Initial state                                                           *)
(***************************************************************************)

Init ==
    /\ t = 0
    /\ RoH \in Real
    /\ 0.0 <= RoH
    /\ RoH <= RoHMax

(***************************************************************************)
(* Next-state relation                                                     *)
(***************************************************************************)

Next ==
    \E RoH' \in Real :
        /\ t' = t + 1
        /\ 0.0 <= RoH'
        /\ RoH' <= RoHMax
        /\ RoH' <= RoH
        /\ UNCHANGED << >>

(***************************************************************************)
(* Donutloop invariants                                                    *)
(***************************************************************************)

RoHBounded ==
    \A k \in Nat : [](t = k => (0.0 <= RoH /\ RoH <= RoHMax))

RoHMonotone ==
    \A k \in Nat : [](t = k => RoH' <= RoH)

(***************************************************************************)
(* Temporal specification                                                  *)
(***************************************************************************)

Spec ==
    Init /\ [][Next]_<<t, RoH>>

InvBounded ==
    [](0.0 <= RoH /\ RoH <= RoHMax)

InvMonotone ==
    [](t > 0 => RoH <= ENABLED [Next]_<<t, RoH>> => RoH)

THEOREM Spec => InvBounded

THEOREM Spec => InvMonotone

==== 
