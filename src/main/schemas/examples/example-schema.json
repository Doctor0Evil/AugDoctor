{
  "$id": "https://augdoctor.org/schema/eeg_feature_summary.v1.json",
  "title": "EEGFeatureSummaryV1",
  "type": "object",
  "description": "Versioned, non-identity EEG feature summary for neural-rope few-shot prompting.",
  "properties": {
    "schema_version": {
      "type": "string",
      "enum": ["eeg_feature_summary.v1"],
      "description": "Schema identifier for forward/backward compatibility."
    },
    "header": {
      "type": "object",
      "description": "Access-control and provenance header.",
      "properties": {
        "issuer_did": {
          "type": "string",
          "description": "DID of the issuing augmented-citizen or authorized device (ALN/DID)."
        },
        "subject_role": {
          "type": "string",
          "enum": ["augmented_citizen", "authorized_researcher", "system_daemon"],
          "description": "Role classification; never stores personal identity details."
        },
        "biophysical_chain_allowed": {
          "type": "boolean",
          "description": "If true, this record may be anchored to the biophysical blockchain."
        },
        "network_tier": {
          "type": "string",
          "enum": ["core", "edge", "sandbox"],
          "description": "Execution tier; core tier reserved for trusted ALN / Bostrom identities."
        }
      },
      "required": ["issuer_did", "subject_role", "biophysical_chain_allowed", "network_tier"],
      "additionalProperties": false
    },
    "session_id": { "type": "string" },
    "environment_id": { "type": "string" },
    "intent_label": { "type": "string" },
    "channel_count": { "type": "integer", "minimum": 1, "maximum": 512 },
    "fs_hz": { "type": "integer", "minimum": 50, "maximum": 5000 },
    "band_alpha_power": { "type": "number" },
    "band_beta_power": { "type": "number" },
    "band_gamma_power": { "type": "number" },
    "csp_component": { "type": "number" },
    "erp_latency_ms": { "type": "integer", "minimum": 0, "maximum": 1000 },
    "classifier_confidence": { "type": "number", "minimum": 0.0, "maximum": 1.0 },
    "reward_score": { "type": "number", "minimum": -1.0, "maximum": 1.0 },
    "safety_decision": {
      "type": "string",
      "enum": ["Allow", "AllowWithRedaction", "Deny"]
    }
  },
  "required": [
    "schema_version",
    "header",
    "session_id",
    "environment_id",
    "intent_label",
    "channel_count",
    "fs_hz",
    "band_alpha_power",
    "band_beta_power",
    "csp_component",
    "erp_latency_ms",
    "classifier_confidence",
    "reward_score",
    "safety_decision"
  ],
  "additionalProperties": false
}

    "session_id": {
      "type": "string",
      "description": "Ephemeral session identifier (no PII)."
    },
    "environment_id": {
      "type": "string",
      "description": "Device or environment identifier (e.g., prosthetic ID)."
    },
    "intent_label": {
      "type": "string",
      "description": "Decoded intent label (e.g., left_grasp, rotate_clockwise)."
    },
    "channel_count": {
      "type": "integer",
      "minimum": 1,
      "maximum": 512
    },
    "fs_hz": {
      "type": "integer",
      "minimum": 50,
      "maximum": 5000
    },
    "band_alpha_power": {
      "type": "number",
      "description": "Average alpha band power (e.g., 8–13 Hz)."
    },
    "band_beta_power": {
      "type": "number",
      "description": "Average beta band power (e.g., 13–30 Hz)."
    },
    "band_gamma_power": {
      "type": "number",
      "description": "Average gamma band power (optional; 30+ Hz)."
    },
    "csp_component": {
      "type": "number",
      "description": "Representative CSP feature for motor imagery decoding."
    },
    "erp_latency_ms": {
      "type": "integer",
      "minimum": 0,
      "maximum": 1000,
      "description": "Latency of event-related potential peak."
    },
    "classifier_confidence": {
      "type": "number",
      "minimum": 0.0,
      "maximum": 1.0,
      "description": "Confidence score from EEG classifier."
    },
    "reward_score": {
      "type": "number",
      "minimum": -1.0,
      "maximum": 1.0,
      "description": "Task-level reward (success, smoothness, safety)."
    },
    "safety_decision": {
      "type": "string",
      "enum": ["Allow", "AllowWithRedaction", "Deny"],
      "description": "Guard outcome at time of execution."
    }
  },
  "required": [
    "session_id",
    "environment_id",
    "intent_label",
    "channel_count",
    "fs_hz",
    "band_alpha_power",
    "band_beta_power",
    "csp_component",
    "erp_latency_ms",
    "classifier_confidence",
    "reward_score",
    "safety_decision"
  ],
  "additionalProperties": false
}
